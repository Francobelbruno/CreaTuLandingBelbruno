import{u as x,j as e,L as u,r as l,a as f}from"./index-jTIg1DJ3.js";import{f as j,a as g}from"./products-VCj_vrw6.js";import{S as N}from"./sweetalert2.esm.all-DzlfzZPw.js";import"./firebase-D-P0CyqM.js";function y({item:t}){const{addItem:a}=x(),c=t?.img||"",s=t?.titulo||"Sin título",o=t?.descripcion||"",r=typeof t?.price=="string"?parseFloat(t?.price):t?.price,n=r?new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(r):"";return e.jsxs("div",{className:"card mb-4 shadow-sm h-100",children:[c&&e.jsx(u,{to:`/item/${t?.id}`,children:e.jsx("img",{src:c,alt:s,className:"card-img-top",style:{objectFit:"cover",height:220}})}),e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsx("h5",{className:"card-title",children:e.jsx(u,{to:`/item/${t?.id}`,className:"text-decoration-none",children:s})}),e.jsx("p",{className:"card-text text-muted",children:o}),e.jsxs("div",{className:"mt-auto d-flex justify-content-between align-items-center",children:[e.jsx("small",{className:"text-muted",children:n}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{a({id:t.id,title:s,price:r,image:c},1),N.fire({toast:!0,position:"top-end",icon:"success",title:`${s} agregado al carrito`,showConfirmButton:!1,timer:1400})},"aria-label":`Agregar ${s} al carrito`,children:"Agregar"})]})]})]})}function b({data:t}){return e.jsx("div",{className:"row",children:t.map(a=>e.jsx("div",{className:"col-md-4",children:e.jsx(y,{item:a})},a.id))})}function I({greeting:t}){const[a,c]=l.useState([]),[s,o]=l.useState(!0),[r,n]=l.useState(null),{categoryId:d}=f();return l.useEffect(()=>{let i=!1;async function p(){o(!0),n(null);try{const h=await(d?()=>j(d):g)();i||c(h||[])}catch(m){console.error("Error cargando productos:",m),i||n(m?.message||"No se pudieron cargar los productos")}finally{i||o(!1)}}return p(),()=>{i=!0}},[d]),e.jsx("main",{className:"container-xxl py-4",children:e.jsx("div",{className:"p-4 p-md-5 mb-4 bg-light rounded-3",children:e.jsxs("div",{className:"container-fluid py-2",children:[t&&e.jsx("h1",{className:"display-6 m-0",children:t}),e.jsx("p",{className:"text-muted m-0",children:"Ropa personalizada y única hecha para vos."}),s&&e.jsx("div",{className:"mt-3",children:"Cargando productos..."}),r&&e.jsx("div",{className:"alert alert-danger mt-3",children:r}),!s&&!r&&a.length===0&&e.jsx("div",{className:"mt-3 text-muted",children:"No hay productos para mostrar."}),!s&&!r&&a.length>0&&e.jsx(b,{data:a})]})})})}export{I as default};
